{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst API_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41812412-8184544d67aaee5dc545e6a16';\nconst url = `${API_URL}?key=${API_KEY}`;\n\nfunction fetchData(searchValue) {\n  return fetch(`${url}&q=${searchValue}`)\n    .then(resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n      return resp.json();\n    })\n}\n\nconst searchForm = document.querySelector('.search-form')\nconst gallery = document.querySelector('.gallery')\nconst loader = document.querySelector('.loader')\n\nsearchForm.addEventListener(\"submit\", handleSearch)\n\nfunction handleSearch(event) {\n  event.preventDefault()\n  const form = event.currentTarget;\n  const searchValue = form.elements.query.value;\n  loader.classList.add('loader'); \n  fetchData(searchValue).then(render).catch(handleError).finally(() => {form.reset();\n  loader.classList.remove('loader');\n  });\n}\n\nfunction render(data) {\n  if(data.hits.length === 0){\n    iziToast.error({\n      message: `Sorry, there are no images matching your search query. Please try again!`,\n    });\n  }\n  gallery.innerHTML = createMarkup(data.hits);\n  lightbox.refresh();\n}\n\n  function handleError(error) {\n          iziToast.error({\n            message: `Sorry, something went wrong. Please try again later!`,\n          });\n  }\n\n  function createMarkup(arr) {\n    return arr\n      .map(\n        ({\n          largeImageURL,\n          index,\n          webformatURL,\n          tags,\n          likes,\n          views,\n          downloads,\n          comments,\n        }) => `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" hits-index=\"${index}\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <ul class=\"gallery-item-description\">\n                <li>Likes: ${likes}</li>\n                <li>Views: ${views}</li>\n                <li>Downloads: ${downloads}</li>\n                <li>Comments: ${comments}</li>\n            </ul>\n        </a>\n    </li>`\n      )\n      .join('');\n  }\n\n  let lightbox = new SimpleLightbox('.gallery a', {\n    /* options */\n    captionsData: 'alt',\n    captionDelay: 250,\n  });"],"names":["API_URL","API_KEY","url","fetchData","searchValue","resp","searchForm","gallery","loader","handleSearch","event","form","render","handleError","data","iziToast","createMarkup","lightbox","error","arr","largeImageURL","index","webformatURL","tags","likes","views","downloads","comments","SimpleLightbox"],"mappings":"6vBAMA,MAAMA,EAAU,2BACVC,EAAU,qCACVC,EAAM,GAAGF,SAAeC,IAE9B,SAASE,EAAUC,EAAa,CAC9B,OAAO,MAAM,GAAGF,OAASE,GAAa,EACnC,KAAKC,GAAQ,CACZ,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAClB,CAAK,CACL,CAEA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAE/CF,EAAW,iBAAiB,SAAUG,CAAY,EAElD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAgB,EACtB,MAAMC,EAAOD,EAAM,cACbN,EAAcO,EAAK,SAAS,MAAM,MACxCH,EAAO,UAAU,IAAI,QAAQ,EAC7BL,EAAUC,CAAW,EAAE,KAAKQ,CAAM,EAAE,MAAMC,CAAW,EAAE,QAAQ,IAAM,CAACF,EAAK,MAAK,EAChFH,EAAO,UAAU,OAAO,QAAQ,CAClC,CAAG,CACH,CAEA,SAASI,EAAOE,EAAM,CACjBA,EAAK,KAAK,SAAW,GACtBC,EAAS,MAAM,CACb,QAAS,0EACf,CAAK,EAEHR,EAAQ,UAAYS,EAAaF,EAAK,IAAI,EAC1CG,EAAS,QAAO,CAClB,CAEE,SAASJ,EAAYK,EAAO,CACpBH,EAAS,MAAM,CACb,QAAS,sDACrB,CAAW,CACR,CAED,SAASC,EAAaG,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CACC,cAAAC,EACA,MAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,UAAAC,EACA,SAAAC,CACV,IAAc;AAAA,mBACKP;AAAA,iDAC8BC,WAAeC,WAAsBC;AAAA;AAAA,6BAEzDC;AAAA,6BACAC;AAAA,iCACIC;AAAA,gCACDC;AAAA;AAAA;AAAA,UAIzB,EACA,KAAK,EAAE,CACX,CAED,IAAIV,EAAW,IAAIW,EAAe,aAAc,CAE9C,aAAc,MACd,aAAc,GAClB,CAAG"}